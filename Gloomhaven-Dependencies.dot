digraph
{
	// Set up the Gloomhaven font Pirata One (Needs PirataOne-Gloomhaven.ttf installed from the Creator Pack)
	graph [fontname = "Pirata One"];
	node [fontname = "Pirata One", penwidth = 2, shape = box];
	edge [fontname = "Pirata One", penwidth = 2];

	subgraph cluster_legend
	{
		label = "Legend";
		shape = rectangle;
		color = black;

		// mindist=0.1;
		// ranksep=0.1;
		// nodesep=0.1;

		rankdir = LR;
		{rank=min; linked incomplete completed blocked}
		{rank=max; label_linked label_incomplete label_completed label_blocked}

		linked     [label = "🔲 #00: Scenario 🌇"  penwidth = 5];
		incomplete [label = "🔲 #00: Scenario"     penwidth = 5];
		completed  [label = "☑️  #00: Scenario"     style = filled, fillcolor = gray];
		blocked    [label = "🔒 #00: Scenario"     style = dashed];

		node [shape = plaintext, fillcolor = transparent];
		label_linked     [label = "Linked to Gloomhaven"];
		label_incomplete [label = "Incomplete"];
		label_completed  [label = "Completed"];
		label_blocked    [label = "Blocked"];

		edge [style = invis, weight = 10];
		linked     -> label_linked;
		incomplete -> label_incomplete;
		completed  -> label_completed;
		blocked    -> label_blocked;
	}

	// Scenario nodes
	 1 [label = "☑️  #1: Black Barrow"              style = filled, fillcolor = gray];
	 2 [label = "☑️  #2: Barrow Lair"               style = filled, fillcolor = gray];
	 3 [label = "☑️  #3: Inox Encampment"           style = filled, fillcolor = gray];
	 4 [label = "☑️  #4: Crypt of the Damned"       style = filled, fillcolor = gray];
	 5 [label = "☑️  #5: Ruinous Crypt"             style = filled, fillcolor = gray];
	 6 [label = "☑️  #6: Decaying Crypt"            style = filled, fillcolor = gray];
	 7 [label = "☑️  #7: Vibrant Grotto"            style = filled, fillcolor = gray];
	 8 [label = "☑️  #8: Gloomhaven Warehouse 🌇"   style = filled, fillcolor = gray];
	 9 [label = "🔒 #9: Diamond Mine",             style = dashed];
	10 [label = "🔲 #10: Plane of Elemental Power" penwidth = 5];
	13 [label = "☑️  #13: Temple of the Seer"       style = filled, fillcolor = gray];
	14 [label = "☑️  #14: Frozen Hollow"            style = filled, fillcolor = gray];
	15 [label = "🔲 #15: Shrine of Strength"       penwidth = 5];
	16 [label = "🔲 #16: Mountain Pass"            penwidth = 5];
	17 [label = "🔲 #17: Lost Island"              penwidth = 5];
	18 [label = "🔲 #18: Abandoned Sewers 🌇"      penwidth = 5];
	19 [label = "☑️  #19: Forgotten Crypt"          style = filled, fillcolor = gray];
	20 [label = "☑️  #20: Necromancer's Sanctum"    style = filled, fillcolor = gray];
	24 [label = "🔒 #24"                           style = filled, fillcolor = gray];
	27 [label = "🔲 #27: Ruinous Rift"             penwidth = 5];
	28 [label = "🔲 #28: Outer Ritual Chamber"     penwidth = 5];
	29 [label = "🔒 #29"                           style = filled, fillcolor = gray];
	31 [label = "🔒 #31"                           style = filled, fillcolor = gray];
	43 [label = "🔒 #43"                           style = filled, fillcolor = gray];
	52 [label = "☑️  #52: Noxious Cellar 🌇"        style = filled, fillcolor = gray];
	53 [label = "☑️  #53: Crypt Basement"           style = filled, fillcolor = gray];
	54 [label = "🔲 #54: Palace of Ice"            penwidth = 5];
	65 [label = "☑️  #65: Sulfer Mine"              style = filled, fillcolor = gray];
	70 [label = "☑️  #70: Chained Isle 🌇"          style = filled, fillcolor = gray];
	93 [label = "🔲 #93: Sunken Vessel 🌇"         penwidth = 5];

	// Party achivement nodes
	party_first_steps           [shape = invhouse,      label = "☑️  Party: First Steps"];
	party_jekserahs_plans       [shape = invhouse,      label = "☑️  Party: Jekserah’s Plans"];
	party_dark_bounty           [shape = invhouse,      label = "☑️  Party: Dark Bounty"];
	party_stonebreakers_censer  [shape = invhouse,      label = "☑️  Party: Stonebreaker's Censer"];
	party_map_to_treasure       [shape = invhouse,      label = "☑️  Party: A Map to Treasure"];

	// Global achievement nodes
	global_merchant_flees       [shape = parallelogram, label = "✅ Global: The Merchant Flees"];
	global_power_of_enhancement [shape = parallelogram, label = "✅ Global: The Power of Enhancement"];
	global_dead_inside          [shape = parallelogram, label = "❌ Global: The Dead Invade"];
	global_rift_neutralized     [shape = parallelogram, label = "❌ Global: The Rift Neutralized"];
	global_artifact_lost        [shape = parallelogram, label = "❌ Global: Artifact Lost"];

	quest_seeker_of_xorn        [shape = parallelogram, label = "🖋️ “Seeker of Xorn” personal quest"];

	{rank = same 3 4}
	{rank = same 9 13 14}

	// Scenario unlocks
	                                1 -> {2, party_first_steps};
	party_first_steps           ->  2 -> {3, 4};
	                                3 -> {8, 9, party_jekserahs_plans};
	                                4 -> {5, 6};
	                                5 -> {10, 14, 19};
	                                6 -> {8, party_jekserahs_plans, party_dark_bounty};
	                                7 -> {20};
	party_jekserahs_plans       ->  8 -> {7, 13, 14};
	                               19 -> {27, party_stonebreakers_censer};
	                               20 -> {16, 18, 28};
	party_stonebreakers_censer  -> 27
	party_dark_bounty           -> 28
	quest_seeker_of_xorn        -> 52 -> {53}
	                               53 -> {54}
	party_map_to_treasure       -> 93

	subgraph OptionsChosen
	{
		edge [color = "green"   label = "chosen"];

	                               13 -> {17};
	}

	subgraph OptionsNotChosen
	{
		edge [color = "red"   label = "not chosen" style = dashed];

	                               13 -> {15, 20};
	}

	// Global achievement requirements
	subgraph GlobalAchievements
	{
		// Incomplete at the time
		subgraph IncompleteGlobalAchievements
		{
			edge [color = "red"   label = "❌" style = dashed];

			global_merchant_flees       ->  3;
			global_dead_inside          ->  8;
			global_rift_neutralized     -> 10;
			global_artifact_lost        -> 27;
		}

		subgraph BlockedGlobalAchievementUnlocks
		{
			edge [color = "red"   label = "❌"];

			global_merchant_flees       ->  9;
		}

		subgraph BlockedGlobalAchievementRequirements
		{
			edge [label = "🔒" style = dashed];

			9                           -> global_dead_inside;
		}

		subgraph CompleteGlobalAchievements
		{
			edge [color = "green" label = "✅"];

			 8 -> global_merchant_flees       -> {7, 20};
			14 -> global_power_of_enhancement -> {7, 19, 31, 43};
		}
	}

	// Scenario links (physical connections)
	subgraph ScenarioLinks
	{
		edge [dir = none, color = "gray20:gray66:gray20"];

		1 ->  2;
		5 -> 10;
		16 -> 24;
		28 -> 29;
	}
}

